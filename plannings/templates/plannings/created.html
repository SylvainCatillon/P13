{%  extends 'core/base.html' %}
{%  block content %}
  <div class="container">
    <p>Planning créé</p>
    <a id="PlanningLink" href="{{ link }}">{{ link }}</a>
    <br>
    <button id="CopyButton" class="btn btn-info">Copier le lien</button>
  </div>
{% endblock %}
{%  block js %}
{{  block.super }}
  <script type="text/javascript">
  $(function () {

      /*
      Copy the planning's link in the clipboard when the copy button is clicked
      -create a hidden temp input
      -set the link as the input value
      -force the focus on the input
      -use the command 'copy'
      -delete the temp input
       */
      $("#CopyButton").on("click", function () {
          let $temp = $("<input/>")
          $("body").append($temp)
          $temp.val($('#PlanningLink').attr("href")).select()
          let success = document.execCommand("copy")
          $temp.remove()
          if (success) {
              alert("Lien copié")
          } else {
              alert("Erreur, le lien n'a pas pu être copié")
          }
      })

  })
  </script>
{% endblock %}